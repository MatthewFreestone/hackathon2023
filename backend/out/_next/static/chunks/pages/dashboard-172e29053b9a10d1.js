(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(1701)}])},9777:function(e,t,s){"use strict";s.d(t,{Z:function(){return f}});var a=s(5893),l=s(7294),n=s(8368),r=s(6123),i=s(1407),c=s(243),o=s(1799),d=s(1613),x=s(1492),h=s(1664),m=s.n(h);let u=[{name:"Dashboard",href:"dashboard",current:!0},{name:"Results",href:"results",current:!1}];function g(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}function f(e){let{showSignIn:t,currentTab:s}=e,[h,f]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=localStorage.getItem("username");e&&f(e),u=u.map(e=>(e.name===s?e.current=!0:e.current=!1,e))},[]),(0,a.jsx)(n.p,{as:"nav",className:"bg-darkBlue fixed w-full z-50",children:e=>{let{open:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-2 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"relative flex h-16 items-center justify-between",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center sm:hidden",children:(0,a.jsxs)(n.p.Button,{className:"inline-flex items-center justify-center rounded-md p-2 text-gray-300 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open main menu"}),s?(0,a.jsx)(c,{className:"block h-6 w-6","aria-hidden":"true"}):(0,a.jsx)(o,{className:"block h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-center sm:items-stretch sm:justify-start",children:[(0,a.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[(0,a.jsx)(m(),{href:"/",children:(0,a.jsx)(x,{className:"h-9 w-auto text-darkSand lg:hidden"})}),(0,a.jsx)(m(),{href:"/",children:(0,a.jsx)(x,{className:"h-9 w-auto text-darkSand lg:block hidden"})})]}),(0,a.jsx)("div",{className:"hidden sm:ml-6 sm:block",children:(0,a.jsxs)("div",{className:"flex space-x-4 h-full",children:[!t&&u.map(e=>(0,a.jsx)(m(),{href:e.href,className:g(e.current?"bg-gray-900 text-white":"text-gray-200 hover:bg-gray-700 hover:text-white","px-3 py-2 rounded-md text-sm font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name)),t&&(0,a.jsx)("div",{className:"my-auto",children:(0,a.jsx)("span",{className:"text-gray-300 text-xl font-sans font-semibold",children:"Plan2Chill"})})]})})]}),!t&&(0,a.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0",children:[(0,a.jsx)("p",{children:h}),(0,a.jsxs)(r.v,{as:"div",className:"relative ml-3",children:[(0,a.jsx)("div",{children:(0,a.jsxs)(r.v.Button,{className:"flex rounded-full text-gray-300 bg-darkBlue text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[(0,a.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,a.jsx)(d,{className:"h-8 w-8","aria-hidden":"true"})]})}),(0,a.jsx)(i.u,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,a.jsx)(r.v.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,a.jsx)(r.v.Item,{children:e=>{let{active:t}=e;return(0,a.jsx)(m(),{href:"/signin",className:g(t?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Sign out"})}})})})]})]}),t&&(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)(m(),{href:"/signin",className:"rounded-full bg-darkBlue p-1 text-gray-300 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:(0,a.jsxs)("span",{className:"text-lg font-sans font-semibold leading-6",children:["Sign in ",(0,a.jsx)("span",{"aria-hidden":"true",children:"â†’"})]})})})]})}),(0,a.jsx)(n.p.Panel,{className:"sm:hidden",children:(0,a.jsx)("div",{className:"space-y-1 px-2 pt-2 pb-3",children:u.map(e=>(0,a.jsx)(n.p.Button,{as:"a",href:e.href,className:g(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block px-3 py-2 rounded-md text-base font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name))})})]})}})}},1701:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(5893),l=s(9777),n=s(9008),r=s.n(n),i=s(5675),c=s.n(i),o=s(2369),d=s(8960),x=s(8034),h=s(7294);let m=e=>{let{assignment:t,onChangeSplitable:s,onDifficultyChange:l}=e,[n,r]=(0,h.useState)(t.difficulty),[i,c]=(0,h.useState)(t.splittable),o=e=>{if(""===e.target.value||!Number(e.target.value)){r(0),l&&l(0);return}let t=parseInt(e.target.value);r(t),l&&l(t)},m=()=>{let e=!i;c(e),s&&s(e)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"max-w-sm w-min",children:(0,a.jsxs)("div",{className:"border border-gray-400 rounded bg-lightSand rounded-b p-4 flex flex-col justify-between leading-normal",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 flex items-center",children:t.course}),(0,a.jsx)("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.name}),(0,a.jsxs)("div",{className:"text-gray-700 text-base",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-x-1",children:[(0,a.jsx)("span",{className:"font-bold pr-2",children:" Difficulty: "}),(0,a.jsx)("button",{title:"Decrease",onClick:()=>o({target:{value:n-1}}),className:"text-darkBlue hover:text-gray-900 hover:scale-110",children:(0,a.jsx)(d,{className:"h-5 w-5"})}),(0,a.jsx)("input",{className:"font-bold w-10 bg-lightSand text-darkBlue text-center selection:bg-white",value:n,onChange:o}),(0,a.jsx)("button",{title:"Increase",onClick:()=>o({target:{value:n+1}}),className:"text-darkBlue hover:text-gray-900 hover:scale-110",children:(0,a.jsx)(x,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"font-bold pr-2",children:[" Splittable?",(0,a.jsx)("input",{type:"checkbox",checked:i,className:"form-checkbox rounded mx-2 h-5 w-5 text-white-900",onChange:m})]})})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("p",{className:"text-gray-600",children:t.due_date})})})]})})})},u=e=>{let{date:t,percentage:s,assignments:l,onPercentageChange:n}=e,[r,i]=(0,h.useState)(!1),[c,o]=(0,h.useState)(s),m=e=>{if(""===e.target.value||!Number(e.target.value)){o(0),n&&n(0);return}let t=parseInt(e.target.value);o(t),n&&n(t)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"max-w-sm w-min",children:(0,a.jsxs)("div",{className:"border border-gray-400 rounded bg-lightSand rounded-b p-4 flex flex-col justify-between leading-normal",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"text-gray-900 font-bold text-xl mb-2",children:t.toDateString().slice(0,-5)}),(0,a.jsx)("div",{className:"text-gray-700 text-base",children:(0,a.jsxs)("div",{className:"flex flex-row gap-x-1",children:[(0,a.jsx)("span",{className:"font-bold pr-2",children:" Percentage of Work: "}),(0,a.jsx)("button",{title:"Increase",onClick:()=>m({target:{value:s-1}}),children:(0,a.jsx)(d,{className:"h-5 w-5 text-darkBlue"})}),(0,a.jsx)("input",{className:"font-bold w-10 bg-lightSand text-darkBlue text-center",value:s,onChange:m}),(0,a.jsx)("button",{title:"Decrease",onClick:()=>m({target:{value:s+1}}),className:"text-gray-600 hover:text-gray-900",children:(0,a.jsx)(x,{className:"h-5 w-5 text-darkBlue"})})]})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"text-sm",children:(0,a.jsx)("p",{className:"text-gray-600",children:null==l?void 0:l.length})})})]})})})};var g=s(8433),f=s(1163);let p=()=>{let e="http://35.225.80.239",t=(0,f.useRouter)(),s=new Date;s.setHours(0,0,0,0);let[n,i]=(0,h.useState)(s),[d,x]=(0,h.useState)(s),[p,j]=(0,h.useState)(s),[b,v]=(0,h.useState)(!1),[N,y]=(0,h.useState)(!1),[w,k]=(0,h.useState)(!1),[S,C]=(0,h.useState)(!1),[B,D]=(0,h.useState)([]),[I,_]=(0,h.useState)([]),[E,Z]=(0,h.useState)(0),[P,T]=(0,h.useState)(!0);(0,h.useEffect)(()=>{if(I){let e=I.map(e=>e.percentage);Z(e.reduce((e,t)=>e+t,0)),T(100===e.reduce((e,t)=>e+t,0))}},[I]),(0,h.useEffect)(()=>{n&&d&&p&&!(d<n)&&!(p>n)?C(!1):(console.log("Selected Dates are Invalid"),C(!0))},[d,n,p]),(0,h.useEffect)(()=>{let s=localStorage.getItem("token");s||t.push("/signin");let a="".concat(e,"/loaddata?token=").concat(s);g.Z.get(a).then(e=>{if(e.data.error){console.error("Invalid or Missing Token");return}console.log(e.data),D(e.data.assignments)}).catch(e=>{console.log(e)})},[]),(0,h.useEffect)(()=>{console.log(B)},[B]);let F=()=>{let s=localStorage.getItem("token");s||t.push("/signin");let a="",l="",n="";if(B.map(e=>{a+=e._id+",",l+=e.difficulty+",",n+=(e.splittable||"false")+","}),a){a=a.slice(0,-1),l=l.slice(0,-1),n=n.slice(0,-1);let t="".concat(e,"/setassignments?token=").concat(s,"&ids=").concat(a,"&difficulties=").concat(l,"&splittables=").concat(n);g.Z.post(t).then(e=>{console.log(e.data)}).catch(e=>{console.error(e)})}},z=()=>{let t=localStorage.getItem("token"),s=p.toLocaleString("default",{month:"2-digit",day:"2-digit",year:"numeric"}).split("/"),a=s[2]+"-"+s[0]+"-"+s[1],l=n.getDate()-p.getDate(),r=d.getDate()-n.getDate()+1,i="".concat(e,"/setcalendar?anchor=").concat(a,"&work_days=").concat(l,"&vacation_days=").concat(r,"&token=").concat(t);console.log("Sending request to ".concat(i)),g.Z.post(i).then(e=>{if(e.data.error){console.error("Error in updating calendar");return}console.log(e.data),A(e.data.percents),localStorage.setItem("anchorDate",p.toJSON()),console.log(I)}).catch(e=>{console.log(e)})},O={title:"",autoHide:!1,todayBtn:!0,clearBtn:!0,theme:{background:S?"bg-red-500":"bg-white",todayBtn:"",clearBtn:"",icons:"",text:"",disabledText:"",input:"bg-white",inputIcon:"",selected:""},datepickerClassNames:"top-12",language:"en"},A=e=>{let t=[];for(let s=0;s<e.length;s++){let a=new Date(p);a.setDate(a.getDate()+s),t.push({date:a,percentage:e[s],assignments:[]})}_(t)},W=()=>{S||(F(),z(),document.location.href="#availability")},L=()=>{let s=localStorage.getItem("token");s||t.push("/signin");let a=I.map(e=>e.percentage),l="".concat(e,"/setpercentages?token=").concat(s,"&percentages=").concat(a);g.Z.post(l).then(e=>{if(e.data.error){console.error("Error in updating percentages");return}console.log(e.data),t.push("/results")}).catch(e=>{console.log(e)})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r(),{children:[(0,a.jsx)("title",{children:"Vacation Planner"}),(0,a.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("main",{className:"flex flex-col items-center w-full min-h-screen ",children:[(0,a.jsx)(l.Z,{currentTab:"Dashboard"}),(0,a.jsxs)("div",{className:"absolute -z-10",children:[(0,a.jsx)(c(),{unoptimized:!0,src:"/dalleImg.png",alt:"hero",width:718,height:718,className:"blur-3xl scale-x-[2.3] scale-150 opacity-80 "}),(0,a.jsx)(c(),{unoptimized:!0,src:"/dalleImg.png",alt:"hero",width:718,height:718,className:"blur-3xl scale-x-[2.3] scale-150 opacity-80 "})]}),(0,a.jsxs)("div",{className:"mt-24 my-8 opacity-100 w-full sm:px-10 px-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl text-center my-4",children:"Upcoming Assignments"}),(0,a.jsx)("div",{className:"flex justify-center flex-wrap gap-10",children:B&&0!==B.length&&B.map(e=>(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(m,{assignment:e,onDifficultyChange:t=>{console.log("Changing difficulty of ",e.name," to ",t),e.difficulty=t},onChangeSplitable:t=>{console.log("Changing splittable of ",e.name," to ",t),e.splittable=t}})},e._id))}),0===B.length&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center w-full",children:(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight text-center text-gray-400 sm:text-3xl my-2",children:"Loading Assignments ..."})})]}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-white-900 sm:text-4xl",children:"I want to take a vacation on"}),(0,a.jsxs)("div",{className:"flex flex-row gap-x-5 items-center mt-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(o.Z,{options:O,value:n,onChange:e=>i(e),setShow:e=>v(e),show:b})}),(0,a.jsx)("h2",{className:"text-lg font-bold tracking-tight text-white-900 sm:text-2xl",children:"to"}),(0,a.jsx)("div",{children:(0,a.jsx)(o.Z,{options:O,value:d,onChange:e=>x(e),setShow:e=>y(e),show:N})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center mt-5",children:[(0,a.jsx)("h2",{className:"text-lg font-bold tracking-tight text-white-900 sm:text-xl",children:"And I want to start doing extra work on"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(o.Z,{options:O,value:p,onChange:e=>j(e),setShow:e=>k(e),show:w})})]}),(0,a.jsx)("button",{className:"rounded-md lg:px-5 lg:py-3 px-3.5 py-1.5 \n                            text-base font-semibold leading-7 text-white shadow-sm\n                            focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 \n                            focus-visible:outline-white mt-4 ".concat(S?"cursor-not-allowed bg-red-500 border-white border disabled ":" bg-darkBlue  hover:bg-lightBlue "),onClick:()=>{S||W()},children:S?"Selected Dates are Invalid":"Calculate my work distribution"})]}),(0,a.jsxs)("div",{className:"mt-24 my-8 opacity-100 w-full sm:px-10 px-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl text-center my-2",children:"Work Distribution"}),(0,a.jsx)("a",{id:"availability",className:"relative -top-32"}),(0,a.jsx)("div",{className:"flex flex-row flex-wrap gap-2 justify-center",children:0!==I.length&&I.map(e=>(0,a.jsx)(u,{date:e.date,percentage:e.percentage,onPercentageChange:t=>{_(s=>s.map(s=>s.date.toString()===e.date.toString()?{...s,percentage:t}:s))}},e.date.toString()))}),(0,a.jsxs)("div",{children:[0===I.length&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center w-full",children:(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight text-center text-gray-400 sm:text-3xl my-2",children:"Loading Work Distribution ..."})}),0!==I.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full mt-4",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold tracking-tight text-center sm:text-3xl my-2",children:[(0,a.jsx)("span",{children:"Total Work Percentage: "}),(0,a.jsx)("span",{className:P?"text-green-500":"text-red-500",children:"".concat(E,"%")})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"rounded-md lg:px-5 lg:py-3 px-3.5 py-1.5 \n                                         text-base font-semibold leading-7 text-white shadow-sm\n                                         focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 \n                                         focus-visible:outline-white mt-4 ".concat(P?" bg-darkBlue  hover:bg-lightBlue ":"cursor-not-allowed bg-red-500 border-white border disabled "),onClick:P?L:()=>{},children:"Submit"})})]})]})]})]})]})};var j=p}},function(e){e.O(0,[172,59,833,826,774,888,179],function(){return e(e.s=528)}),_N_E=e.O()}]);